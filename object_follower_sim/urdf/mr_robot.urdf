<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from mr_robot.xacro                 | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="mr_robot">
  <material name="silver">
    <color rgba="0.700 0.700 0.700 1.000"/>
  </material>
  <transmission name="right_motor_joint_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="right_motor_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="right_motor_joint_actr">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="left_motor_joint_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="left_motor_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="left_motor_joint_actr">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="base_link">
    <material>
      <color rgba="1 1 1 1"/>
    </material>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <selfCollide>true</selfCollide>
    <gravity>true</gravity>
  </gazebo>
  <gazebo reference="r_tyre_1">
    <material>
      <color rgba="0 0 0 1"/>
    </material>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <selfCollide>true</selfCollide>
  </gazebo>
  <gazebo reference="l_tyre_1">
    <material>
      <color rgba="0 0 0 1"/>
    </material>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <selfCollide>true</selfCollide>
  </gazebo>
  <gazebo reference="lidar_1">
    <material>
      <color rgba="0.6 0.6 0.6 1"/>
    </material>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <selfCollide>true</selfCollide>
  </gazebo>
  <gazebo>
    <plugin filename="gz-sim-diff-drive-system" name="gz::sim::systems::DiffDrive">
      <left_joint>left_motor_joint</left_joint>
      <right_joint>right_motor_joint</right_joint>
      <wheel_separation>0.199</wheel_separation>
      <wheel_radius>0.535</wheel_radius>
      <odom_publish_frequency>1</odom_publish_frequency>
      <max_linear_acceleration>1</max_linear_acceleration>
      <min_linear_acceleration>-1</min_linear_acceleration>
      <max_angular_acceleration>2</max_angular_acceleration>
      <min_angular_acceleration>-2</min_angular_acceleration>
      <max_linear_velocity>0.5</max_linear_velocity>
      <min_linear_velocity>-0.5</min_linear_velocity>
      <max_angular_velocity>1</max_angular_velocity>
      <min_angular_velocity>-1</min_angular_velocity>
    </plugin>
  </gazebo>
  <gazebo>
    <plugin filename="libgz-sim-joint-state-publisher-system.so" name="gz::sim::systems::JointStatePublisher"/>
  </gazebo>
  <gazebo reference="lidar_1">
    <sensor name="front_rplidar" type="gpu_lidar">
      <topic>lidar</topic>
      <update_rate>10</update_rate>
      <lidar>
        <scan>
          <horizontal>
            <samples>640</samples>
            <resolution>1</resolution>
            <min_angle>-1.396263</min_angle>
            <max_angle>1.396263</max_angle>
          </horizontal>
          <vertical>
            <samples>16</samples>
            <resolution>1</resolution>
            <min_angle>-0.261799</min_angle>
            <max_angle>0.261799</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.08</min>
          <max>10.0</max>
          <resolution>0.01</resolution>
        </range>
      </lidar>
      <always_on>1</always_on>
      <visualize>false</visualize>
    </sensor>
  </gazebo>
  <!--
	<gazebo reference="imu_link">
		<sensor name="tb3_imu" type="imu">
			<always_on>true</always_on>
			<update_rate>200</update_rate>
			<imu>
			  <angular_velocity>
				<x>
				  <noise type="gaussian">
					<mean>0.0</mean>
					<stddev>2e-4</stddev>
				  </noise>
				</x>
				<y>
				  <noise type="gaussian">
					<mean>0.0</mean>
					<stddev>2e-4</stddev>
				  </noise>
				</y>
				<z>
				  <noise type="gaussian">
					<mean>0.0</mean>
					<stddev>2e-4</stddev>
				  </noise>
				</z>
			  </angular_velocity>
			  <linear_acceleration>
				<x>
				  <noise type="gaussian">
					<mean>0.0</mean>
					<stddev>1.7e-2</stddev>
				  </noise>
				</x>
				<y>
				  <noise type="gaussian">
					<mean>0.0</mean>
					<stddev>1.7e-2</stddev>
				  </noise>
				</y>
				<z>
				  <noise type="gaussian">
					<mean>0.0</mean>
					<stddev>1.7e-2</stddev>
				  </noise>
				</z>
			  </linear_acceleration>
			</imu>
			<plugin name="turtlebot3_imu" filename="libgazebo_ros_imu_sensor.so">
			  <ros>
				<namespace>/tb3</namespace> 
				<remapping>~/out:=imu</remapping>
			  </ros>
			</plugin>
		  </sensor>
	</gazebo>



	<gazebo reference="realsense_camera">
		<sensor name="camera" type="depth">
			<always_on>true</always_on>
			<visualize>true</visualize>
			<update_rate>30</update_rate>
			<camera name="intel_realsense_r200">
			  <horizontal_fov>1.02974</horizontal_fov>
			  <image>
				<width>1920</width>
				<height>1080</height>
				<format>R8G8B8</format>
			  </image>
			  <clip>
				<near>0.02</near>
				<far>300</far>
			  </clip>
			  <noise>
				<type>gaussian</type>
				<mean>0.0</mean>
				<stddev>0.007</stddev>
			  </noise>
			  <distortion>
				<k1>0.1</k1>
				<k2>0.2</k2>
				<k3>0.3</k3>
				<p1>0.4</p1>
				<p2>0.5</p2>
				<center>0.5 0.5</center>
			  </distortion>
			</camera>
			  <plugin name="camera_driver" filename="libgazebo_ros_camera.so">
				<ros>
				   <namespace>test_cam</namespace> 
				   <argument>image_raw:=image_demo</argument> 
				   <argument>camera_info:=camera_info_demo</argument> 
				</ros>
				 camera_name>omit so it defaults to sensor name</camera_name
				 frame_name>omit so it defaults to link name</frameName
				<hack_baseline>0.07</hack_baseline>
				<min_depth>0.001</min_depth>
				<max_depth>300.0</max_depth>
			  </plugin>
		  </sensor>
	  </gazebo>
	-->
  <link name="base_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.00101458512283434 -0.0007739653318165107 0.06722998744578039"/>
      <mass value="11.545387094155112"/>
      <inertia ixx="0.101768" ixy="-1.2e-05" ixz="0.000834" iyy="0.108037" iyz="4.2e-05" izz="0.192707"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://object_follower_sim/meshes/base_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://object_follower_sim/meshes/base_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <link name="r_tyre_1">
    <inertial>
      <origin rpy="0 0 0" xyz="9.682659047986764e-08 -0.002525549104224978 -5.1894622932202594e-08"/>
      <mass value="1.4397484276442625"/>
      <inertia ixx="0.00144" ixy="-0.0" ixz="-0.0" iyy="0.00246" iyz="0.0" izz="0.00144"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.003445 0.10058 -0.052283"/>
      <geometry>
        <mesh filename="package://object_follower_sim/meshes/r_tyre_1.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.003445 0.10058 -0.052283"/>
      <geometry>
        <mesh filename="package://object_follower_sim/meshes/r_tyre_1.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <link name="l_tyre_1">
    <inertial>
      <origin rpy="0 0 0" xyz="9.682664276963737e-08 0.0025262758714060807 -5.18946233832307e-08"/>
      <mass value="1.4397484276442625"/>
      <inertia ixx="0.00144" ixy="-0.0" ixz="0.0" iyy="0.00246" iyz="-0.0" izz="0.00144"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.003445 -0.09882 -0.052283"/>
      <geometry>
        <mesh filename="package://object_follower_sim/meshes/l_tyre_1.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.003445 -0.09882 -0.052283"/>
      <geometry>
        <mesh filename="package://object_follower_sim/meshes/l_tyre_1.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <link name="lidar_1">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.006349391522619652 0.0008793633835904074 -0.002389798737942095"/>
      <mass value="1.1515616542314233"/>
      <inertia ixx="0.000489" ixy="-0.0" ixz="-0.000148" iyy="0.000861" iyz="0.0" izz="0.000987"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.0967 0.001759 -0.108682"/>
      <geometry>
        <mesh filename="package://object_follower_sim/meshes/lidar_1.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="-0.0967 0.001759 -0.108682"/>
      <geometry>
        <mesh filename="package://object_follower_sim/meshes/lidar_1.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <joint name="right_motor_joint" type="continuous">
    <origin rpy="0 0 0" xyz="-0.003445 -0.10058 0.052283"/>
    <parent link="base_link"/>
    <child link="r_tyre_1"/>
    <axis xyz="-0.0 1.0 -0.0"/>
  </joint>
  <joint name="left_motor_joint" type="continuous">
    <origin rpy="0 0 0" xyz="-0.003445 0.09882 0.052283"/>
    <parent link="base_link"/>
    <child link="l_tyre_1"/>
    <axis xyz="0.0 1.0 0.0"/>
  </joint>
  <joint name="lidar_fixed" type="fixed">
    <origin rpy="0 0 0" xyz="0.0967 -0.001759 0.108682"/>
    <parent link="base_link"/>
    <child link="lidar_1"/>
  </joint>
</robot>
